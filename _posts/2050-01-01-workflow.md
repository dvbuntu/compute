---
layout: post
title: Workflow
cover: none.png
date:   2050-01-01 12:00:00
categories: posts
---

Problem
---

Suppose you've got a basic setup for data analysis with `ipython` and `vim` (and hopefully `tmux`).  In the text editor, you compose your commands (enjoying more power and flexibility than in `ipython`), and copy-paste away.  It works pretty well.  But every time, you have to copy paste, it distracts you from the data.  It doesn't seem like much at first, but it adds up.  But it's a toll you pay every time.  And it's a toll you don't have to pay.  So what's your workflow solution for a better REPL?

Workflow Options
---

1. Pure `ipython`
    + Focus is directly in REPL, "instant" feedback (this is huge)
    - Limited text editing support
    - Can save text, but only want "correct" lines (will have to edit later)
    - Lacks full terminal and associated shell programs
2. Vim + `ipython` copy-paste
    + Powerful text editing for command construction
    + Simply save file when done
    - Mental distance between code and execution
        * Highlighting exactly takes time and focus
        * Digital mental task ("execute this code and show me results") becomes analog dexterity one
3. [`ipython` Notebook](http://ipython.org/notebook.html)
    + Editable code is right next to output
    + Superb graphical support
    * Support for many extensions, but not as much as general command line
    - Text editing capabilities may be limited (possibly can be overcome with browser plugins)
4. Integrated Development Environment (IDE) (compromise)
    * Ex. Eclipse
    + Components designed to work together
    + Supports lots of text editing and templating
    - 'bloated' with unneeded features and widgets
    - May lack features you like (and are a pain to make work if at all)
    - Great for software development, but not designed for data analysis
5. Data Analysis GUI package
    * Ex. LIMDEP, Matlab, Rcmdr, Rkward
    + Fully integrated toolset
    + Good at whatever its built for
        - But only what it's built for
        * Imagine coercing LIMDEP or, ugh, Excel, into doing `for` loops!
    + Inevitably, want some software or feature that doesn't play nice

All of these have weaknesses and strengths.  So we're going to build our own using the [tools]({{ site.baseurl }}/{% post_url 2090-01-01-ipython %}) [described]({{ site.baseurl }}/{% post_url 2080-01-01-tmux %}) [previously]({{ site.baseurl }}/{%post_url 2070-01-01-slimux %}) for maximum flexibility when doing interactive data exploration.  Bridge the gap between your editor and your interpreter.  One or two keystrokes is all it takes; your fingers never leave the keyboard and your focus never leaves the problem.

* Improve your REPL; improve your computing effectiveness
* Make the computer compute; you do the fun stuff.

Getting the Tools
---

Use your [favorite](https://www.archlinux.org) Linux distribution's package manager to install `tmux`, `python3` (or `python2` for that classic feel), and `ipython`.  You're also going to want `numpy` and `pylab` for data analysis and visualization.  If you really like Ruby, you can swap that in for Python for similar effect.

`slimux` may not be available in your distribution repositories, but it's easy to install from source.  The [Github page](https://github.com/epeli/slimux) includes a simple guide.  Essentially, you install a vim plugin, `pathogen`, that allows you to easily install other vim plugins, like `slimux`.

To take the easy route, clone my [compute-tools](http://github.com/dvbuntu/compute-tools) repository on a machine running ArchLinux.  From there, you can run `init.sh` to install a basic desktop including the Interactive Computing Workflow once you have a user.  Or, if you already have a desktop environment, you can use `ww.install.sh` to only install the core tools for the workflow.  Adapting these scripts to your local environment shouldn't be too difficult.

I'm working on prepackaging all of these things.  I've had a virtual machine image, but that's a huge file.  I tried a metapackage in the [AUR](aur4.archlinux.org), but it required more hacks than writing my own script.  In the future, I will simply sell flash drives with a dekstop pre-installed with a 'Live' version of your favorite Linux flavor.  These tools are all open source and readily available, so what's your excuse?

Feel the Power
---

Open up your favorite terminal.  I prefer `xterm` with some improved font and color choices, but feel free to use anything you like.  Now maximize your terminal to avoid wasting any screen real estate (I turn off all window decorations even to get that extra line).  Fire up [`tmux`]({{ site.baseurl }}/{% post_url 2080-01-01-tmux %}) and divide your window into a left pane and right pane, as shown below.

![Simple tmux layout]({{ site.baseurl }}/images/tmux_simple.png)

I like to put my interactive session (usually [`Ipython`]({{ site.baseurl }}/{% post_url 2090-01-01-ipython %}) but sometimes R, Ruby, or gdb) on the left and my text editor (`vim` or your favorite [`slimux`]({{ site.baseurl }}/{%post_url 2070-01-01-slimux %}) compatible software) on the right.  What's important is that you can see both on the same screen and can jump between them with one command (`tmux select-pane` in this case).

Now, compose your desired interactive commands in your text editor and start sending them to your interactive session using [`slimux`]({{ site.baseurl }}/{%post_url 2070-01-01-slimux %}).  I like to write logically cohesive blocks first, but you can be as loose or as tight as you like with how often you send.  The key is that `python` or whatever executes your command and prints output.  Maybe you realized you did something wrong; now you simply change a few characters in your text (with full text editing support!) and re-send the lines.  It's so simple, yet so liberating.

Here's a brief video where I'll walk you through some of these steps.  For more advanced lessons, please check out [`training`]({{ site.baseurl }}/{%post_url 2030-01-01-training %}).

<iframe width="560" height="315" src="https://www.youtube.com/embed/F9VeY5KFDl8" frameborder="0"> </iframe>
