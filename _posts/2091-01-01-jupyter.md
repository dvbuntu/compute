---
layout: post
title: IPython Notebook / Jupyter
cover: none.png
date:   2090-01-01 12:00:00
categories: posts
---


# Take a Trip to Jupyter

Jupyter is a web-interface to some computing kernel, typically python, with logically distinct blocks separated into "cells" from first at the top and last at the bottom.  The input to each cell can be MarkDown, code running in a kernel (python, shell, etc), or raw text.  For code cells, you can also "run" them in their given kernel, whish is persistent within a kernel type.  That is, all `python` cells execute in one IPython session.  Further, output, such as lines of text or graphics appear immediately below the input in the same cell.  And these full notebooks can be exported to a variety of formats for easy sharing.  It's a very flexible yet powerful (and not to mention, popular!) system.

![jupyter]({{ site.baseurl }}/images/jupyter.png)

This addresses some of the concerns with the `slimux` REPL.  Namely, code that you write appears literally on top of the output it produces.  If you've brought up many images, you odn't have to guess which is which.  Further, the built-in MarkDown support means you have more precision avaiable to document your code and analysis.  And anyone can translate it into cleanly formatted HTML or whatever.  Analysis and sharing are easier.


Out of the bost, however, Jupyter needs a few add-ons to maintain key `slimux` REPL features.  First, while you can edit text right in the cell in a browser, you lose *all* the advanced text editing powers of ViM or emacs.  To restore your powers, I recommend the [`notebook_input_mode`](https://github.com/dvbuntu/notebook_input_mode) extension.  Some people prefer [`ipython-vimception`](https://github.com/ivanov/ipython-vimception), but that may not work with the latest version of Jupyter.  Similar add-ons are available for emacs users.  Now powered up, you can freely cut lines from one cell and paste in another (movement between cells can follow ViM movement commands as well).  Another limitation of Jupyter is that it uses JSON to store notebooks.  There's nothing wrong with this, but it's not very human readable for someone with your notebook but no Jupyter.  With `slimux`, the code is the document, as readable as that gets.  To amend this, install [`notedown`](https://github.com/aaren/notedown) and save notebooks natively as MarkDown.  This isn't perfect; images are still in base64 with JSON wrapping, but at least the code and documentation are preserved.  Now anyone viewing your notebook can understand it, no matter what software they lack.  Jupyter is highly extensible, making iteasy to add these killer features to be a great REPL.

## Learn
* http://pandas.pydata.org/pandas-docs/stable/tutorials.html

# `slimux` vs Jupyter Comparison

Fully operational, Jpyter is a worthy alternative to `slimux`.  `slimux` seems to have the edge in speed.  Results from the associated IPython session are as quick as the underlying python.  Jupyter, perhaps because it is a web service, suffers from some delay.  It's not much, but if it can't keep up with your thoughts and code, it's a bottleneck.  On flexibility, `slimux` also takes the prize; it can execute commands on any interactive terminal program.  But Jupyter is no slouch, it provides all the common kernels like IPython, R, shell, etc and regularly adds more.  Jupyter's biggest strength is placing results practically in-line with input.  *When physical distance equals logical distance, insight blooms*.  `slimux` only enables this to the extent that the most recent output and input code block (to be fair, the most relevant) are likely to be in adjacent panes, though graphics appear in separate windows.  Also, it's worth noting that Jupyter is more popular; available help and documentation is a valuable feature.  Both `slimux` and Jupyter are capable workflows.

Workflow choice, something so local to the individual, comes down to personal preferences and project needs.  If you must use some legacy terminal framework or demand top speed, `slimux` may be for you.  If you need to collaborate with others in a popular language doing more analysis than development, Jupyter may be wiser.  In both cases, the key is to choose or design an effective computing workflow.  Rather than using your forehead to pound nails, it is better to pick up a hammer.

# Setup
* `ipython notebook`/Jupyter
    * `sudo pip install ipython[all]`
* `notebook_input_mode`
    * run `python install.py`, make sure it installs to jupyter extensions, like `.local/share/jupyter/nbextensions/notebook_input_mode/`
* `notedown`
    * `sudo pip install https://github.com/aaren/notedown/tarball/master`
    * add `c.NotebookApp.contents_manager_class = 'notedown.NotedownContentsManager'` to `~/.jupyter/jupyter_notebook_config.py`

# Basic usage
* jupyter-notebook to launch (in home dir)
* Set keymap with Edit -> ViM
* ViM controls to move between cells, `i` or `Enter` to start editing that cell
    * now in ViM mode, `i` to go insert, `C-c` to switch to normal, Esc to switch to notebook level vim (rather than cell)
* `C-Enter` to run cell
* `C-s` to save and checkpoint notebook

# Comments
These are just some observations about Jupyter as I was learning (and possibly switching from `slimux`).  If you are running the IPython kernel, you do actually have tab completion in your input code cells.  But, you don't have the autocompletion of `Ctrl-p` from ViM.  If we had an extension that ran a full ViM session, we could, but I haven't found that yet.  Also, when saving natively as MarkDown, while it saves the input and the output, it doesn't actually save the state of your IPython kernel, say.  So you'll have to rerun all the cells to get your variables.  I believe using the native `.ipynb` format gets around this, but that means saving something very messy (and possibly bloated).  Finally, with my browser setup, I have to scroll down to actually see all of a newly created output cell.  It just disrupts my flow.  Maybe your setup is better (or you can add several empty cells at the bottom to soak that scroll space).  These aren't show stoppers, but they're room for improvement toward a superior workflow.

